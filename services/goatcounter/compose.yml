---

services:
  # 2024-10-02
  goatcounter:
    image: docker.io/andrewzah/goatcounter:530ab5edff553923fb04d9e1b1a9771f8a6d0461@sha256:96c27e440b608a2df5e641b72f90b88d146ff9de6c5adc246948021de7bea049
    environment:
      GC_PORT: "3443"
      GC_LISTEN: "0.0.0.0:3443"
      GC_TLS: "none"
      GC_ERRORS: "mailto:zah@andrewzah.com"
      GC_EMAIL_FROM: "goatcounter@zah.rocks"
    env_file:
      - "~/docker/services/goatcounter/secret.env"
    volumes:
      - "~/docker/data/goatcounter/:/data/"
    ports:
      - "3443"
    restart: unless-stopped
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.goatcounter.rule=Host(`stats.benzah.com`) || Host(`stats.andrewzah.com`) || Host(`stats.homegrownbinaries.com`) || Host(`stats.worldwarrior.online`)"
      - "traefik.http.routers.goatcounter.entrypoints=websecure"
      - "traefik.http.routers.goatcounter.tls.certresolver=myresolver"
